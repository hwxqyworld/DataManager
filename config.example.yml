# CloudRaidFS 配置文件示例

# 挂载点
mountpoint: /mnt/cloudraidfs

# 纠删码参数
k: 2  # 数据块数量
m: 1  # 校验块数量

# 文件缓存配置（可选）
# 用于缓存完整的小文件，适合频繁读取的小文件
cache:
  # 最大缓存大小（MB），默认 256MB
  max_cache_size: 256
  # 最大可缓存文件大小（MB），默认 32MB
  # 超过此大小的文件不会被缓存
  max_file_size: 32
  # 缓存过期时间（秒），默认 60 秒
  # 每次访问会将过期时间往后顺延
  cache_ttl: 60

# Chunk 缓存配置（可选）
# 用于缓存 stripe/chunk 数据，当文件缓存未命中时使用
# 适合大文件的部分读取场景
chunk_cache:
  # 最大缓存大小（MB），默认 256MB
  max_cache_size: 256
  # 缓存过期时间（秒），默认 60 秒
  # 每次访问会将过期时间往后顺延
  cache_ttl: 60

# 异步上传配置（可选）
# 启用后，写入操作会先保存到本地缓存，立即返回
# 后台线程会异步将数据上传到后端存储
async_upload:
  # 本地缓存目录，用于暂存待上传数据
  # 默认: /tmp/cloudraidfs_cache
  cache_dir: /tmp/cloudraidfs_cache
  # 后台上传线程数，默认 2
  worker_threads: 2
  # 上传失败最大重试次数，默认 3
  max_retries: 3
  # 重试间隔（毫秒），默认 1000
  # 实际间隔 = retry_delay_ms * 重试次数
  retry_delay_ms: 1000
  # 最大队列长度，默认 1000
  # 超过此长度时，写入操作会被阻塞或失败
  max_queue_size: 1000

# 后端存储配置
backends:
  backend0:
    type: local
    path: /data/chunk0
  backend1:
    type: local
    path: /data/chunk1
  backend2:
    type: webdav
    url: https://webdav.example.com/cloudraidfs
    username: user
    password: pass
  # S3/MinIO 后端示例
  # backend3:
  #   type: s3
  #   endpoint: play.min.io
  #   access_key: YOUR_ACCESS_KEY
  #   secret_key: YOUR_SECRET_KEY
  #   bucket: cloudraidfs
  #   use_ssl: true
  #   region: us-east-1
